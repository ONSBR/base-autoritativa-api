{
  "code": "'use strict';var cov_2r8ff24eb4=function(){var path='/Users/coichedid/Projetos/BaseAutoritativaAPI/base-autoritativa-api/src/api/sistemas.js',hash='f487a37f809d3e8b9ac445451cb574a2ab73c9dd',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/coichedid/Projetos/BaseAutoritativaAPI/base-autoritativa-api/src/api/sistemas.js',statementMap:{'0':{start:{line:3,column:0},end:{line:5,column:3}},'1':{start:{line:7,column:16},end:{line:7,column:45}},'2':{start:{line:9,column:17},end:{line:9,column:50}},'3':{start:{line:11,column:39},end:{line:11,column:93}},'4':{start:{line:14,column:16},end:{line:14,column:18}},'5':{start:{line:15,column:2},end:{line:15,column:48}},'6':{start:{line:17,column:14},end:{line:31,column:3}},'7':{start:{line:18,column:21},end:{line:18,column:23}},'8':{start:{line:19,column:4},end:{line:22,column:7}},'9':{start:{line:20,column:6},end:{line:20,column:61}},'10':{start:{line:20,column:34},end:{line:20,column:61}},'11':{start:{line:21,column:6},end:{line:21,column:57}},'12':{start:{line:23,column:4},end:{line:30,column:5}},'13':{start:{line:24,column:19},end:{line:24,column:21}},'14':{start:{line:25,column:6},end:{line:25,column:23}},'15':{start:{line:26,column:6},end:{line:26,column:27}},'16':{start:{line:27,column:31},end:{line:27,column:72}},'17':{start:{line:28,column:6},end:{line:28,column:38}},'18':{start:{line:29,column:6},end:{line:29,column:27}},'19':{start:{line:33,column:2},end:{line:35,column:3}},'20':{start:{line:34,column:4},end:{line:34,column:15}},'21':{start:{line:36,column:2},end:{line:36,column:28}},'22':{start:{line:38,column:23},end:{line:71,column:1}},'23':{start:{line:45,column:4},end:{line:49,column:7}},'24':{start:{line:46,column:6},end:{line:46,column:42}},'25':{start:{line:48,column:6},end:{line:48,column:30}},'26':{start:{line:55,column:17},end:{line:55,column:28}},'27':{start:{line:57,column:4},end:{line:61,column:7}},'28':{start:{line:58,column:6},end:{line:58,column:33}},'29':{start:{line:60,column:6},end:{line:60,column:42}},'30':{start:{line:67,column:18},end:{line:67,column:31}},'31':{start:{line:69,column:4},end:{line:69,column:22}},'32':{start:{line:72,column:21},end:{line:113,column:1}},'33':{start:{line:76,column:19},end:{line:76,column:31}},'34':{start:{line:78,column:20},end:{line:78,column:34}},'35':{start:{line:79,column:6},end:{line:87,column:7}},'36':{start:{line:80,column:8},end:{line:84,column:11}},'37':{start:{line:81,column:10},end:{line:81,column:37}},'38':{start:{line:83,column:10},end:{line:83,column:46}},'39':{start:{line:86,column:8},end:{line:86,column:96}},'40':{start:{line:93,column:19},end:{line:93,column:31}},'41':{start:{line:94,column:18},end:{line:94,column:29}},'42':{start:{line:96,column:19},end:{line:96,column:31}},'43':{start:{line:97,column:20},end:{line:97,column:34}},'44':{start:{line:98,column:6},end:{line:110,column:7}},'45':{start:{line:99,column:8},end:{line:107,column:11}},'46':{start:{line:100,column:23},end:{line:100,column:32}},'47':{start:{line:101,column:10},end:{line:104,column:34}},'48':{start:{line:102,column:12},end:{line:102,column:56}},'49':{start:{line:103,column:12},end:{line:103,column:41}},'50':{start:{line:104,column:17},end:{line:104,column:34}},'51':{start:{line:106,column:10},end:{line:106,column:46}},'52':{start:{line:109,column:8},end:{line:109,column:96}},'53':{start:{line:115,column:0},end:{line:121,column:2}},'54':{start:{line:119,column:4},end:{line:119,column:41}}},fnMap:{'0':{name:'_interopRequireDefault',decl:{start:{line:11,column:9},end:{line:11,column:31}},loc:{start:{line:11,column:37},end:{line:11,column:95}},line:11},'1':{name:'transformTablesJson2CSV',decl:{start:{line:13,column:9},end:{line:13,column:32}},loc:{start:{line:13,column:39},end:{line:37,column:1}},line:13},'2':{name:'_loop',decl:{start:{line:17,column:23},end:{line:17,column:28}},loc:{start:{line:17,column:34},end:{line:31,column:3}},line:17},'3':{name:'(anonymous_3)',decl:{start:{line:19,column:35},end:{line:19,column:36}},loc:{start:{line:19,column:51},end:{line:22,column:5}},line:19},'4':{name:'load',decl:{start:{line:44,column:17},end:{line:44,column:21}},loc:{start:{line:44,column:41},end:{line:50,column:3}},line:44},'5':{name:'(anonymous_5)',decl:{start:{line:45,column:43},end:{line:45,column:44}},loc:{start:{line:45,column:59},end:{line:47,column:5}},line:45},'6':{name:'(anonymous_6)',decl:{start:{line:47,column:13},end:{line:47,column:14}},loc:{start:{line:47,column:31},end:{line:49,column:5}},line:47},'7':{name:'index',decl:{start:{line:54,column:18},end:{line:54,column:23}},loc:{start:{line:54,column:35},end:{line:62,column:3}},line:54},'8':{name:'(anonymous_8)',decl:{start:{line:57,column:37},end:{line:57,column:38}},loc:{start:{line:57,column:53},end:{line:59,column:5}},line:57},'9':{name:'(anonymous_9)',decl:{start:{line:59,column:13},end:{line:59,column:14}},loc:{start:{line:59,column:31},end:{line:61,column:5}},line:59},'10':{name:'read',decl:{start:{line:66,column:17},end:{line:66,column:21}},loc:{start:{line:66,column:34},end:{line:70,column:3}},line:66},'11':{name:'action',decl:{start:{line:75,column:21},end:{line:75,column:27}},loc:{start:{line:75,column:40},end:{line:88,column:5}},line:75},'12':{name:'(anonymous_12)',decl:{start:{line:80,column:62},end:{line:80,column:63}},loc:{start:{line:80,column:78},end:{line:82,column:9}},line:80},'13':{name:'(anonymous_13)',decl:{start:{line:82,column:17},end:{line:82,column:18}},loc:{start:{line:82,column:35},end:{line:84,column:9}},line:82},'14':{name:'action',decl:{start:{line:92,column:21},end:{line:92,column:27}},loc:{start:{line:92,column:40},end:{line:111,column:5}},line:92},'15':{name:'(anonymous_15)',decl:{start:{line:99,column:64},end:{line:99,column:65}},loc:{start:{line:99,column:80},end:{line:105,column:9}},line:99},'16':{name:'(anonymous_16)',decl:{start:{line:105,column:17},end:{line:105,column:18}},loc:{start:{line:105,column:35},end:{line:107,column:9}},line:105},'17':{name:'setConfig',decl:{start:{line:118,column:22},end:{line:118,column:31}},loc:{start:{line:118,column:40},end:{line:120,column:3}},line:118}},branchMap:{'0':{loc:{start:{line:11,column:46},end:{line:11,column:92}},type:'cond-expr',locations:[{start:{line:11,column:70},end:{line:11,column:73}},{start:{line:11,column:76},end:{line:11,column:92}}],line:11},'1':{loc:{start:{line:11,column:46},end:{line:11,column:67}},type:'binary-expr',locations:[{start:{line:11,column:46},end:{line:11,column:49}},{start:{line:11,column:53},end:{line:11,column:67}}],line:11},'2':{loc:{start:{line:20,column:6},end:{line:20,column:61}},type:'if',locations:[{start:{line:20,column:6},end:{line:20,column:61}},{start:{line:20,column:6},end:{line:20,column:61}}],line:20},'3':{loc:{start:{line:79,column:6},end:{line:87,column:7}},type:'if',locations:[{start:{line:79,column:6},end:{line:87,column:7}},{start:{line:79,column:6},end:{line:87,column:7}}],line:79},'4':{loc:{start:{line:79,column:10},end:{line:79,column:39}},type:'binary-expr',locations:[{start:{line:79,column:10},end:{line:79,column:17}},{start:{line:79,column:21},end:{line:79,column:39}}],line:79},'5':{loc:{start:{line:98,column:6},end:{line:110,column:7}},type:'if',locations:[{start:{line:98,column:6},end:{line:110,column:7}},{start:{line:98,column:6},end:{line:110,column:7}}],line:98},'6':{loc:{start:{line:98,column:10},end:{line:98,column:39}},type:'binary-expr',locations:[{start:{line:98,column:10},end:{line:98,column:17}},{start:{line:98,column:21},end:{line:98,column:39}}],line:98},'7':{loc:{start:{line:101,column:10},end:{line:104,column:34}},type:'if',locations:[{start:{line:101,column:10},end:{line:104,column:34}},{start:{line:101,column:10},end:{line:104,column:34}}],line:101},'8':{loc:{start:{line:101,column:14},end:{line:101,column:53}},type:'binary-expr',locations:[{start:{line:101,column:14},end:{line:101,column:20}},{start:{line:101,column:24},end:{line:101,column:53}}],line:101}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0,'52':0,'53':0,'54':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0],'7':[0,0],'8':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();++cov_2r8ff24eb4.s[0];Object.defineProperty(exports,\"__esModule\",{value:true});var _Sistemas=(++cov_2r8ff24eb4.s[1],require('../models/Sistemas'));var _Sistemas2=(++cov_2r8ff24eb4.s[2],_interopRequireDefault(_Sistemas));function _interopRequireDefault(obj){++cov_2r8ff24eb4.f[0];++cov_2r8ff24eb4.s[3];return(++cov_2r8ff24eb4.b[1][0],obj)&&(++cov_2r8ff24eb4.b[1][1],obj.__esModule)?(++cov_2r8ff24eb4.b[0][0],obj):(++cov_2r8ff24eb4.b[0][1],{default:obj});}function transformTablesJson2CSV(data){++cov_2r8ff24eb4.f[1];var results=(++cov_2r8ff24eb4.s[4],[]);++cov_2r8ff24eb4.s[5];results.push(['UsuÃ¡rio','Verbo','Tabelas']);++cov_2r8ff24eb4.s[6];var _loop=function _loop(key){++cov_2r8ff24eb4.f[2];var resultItem=(++cov_2r8ff24eb4.s[7],{});++cov_2r8ff24eb4.s[8];data.results[key].data.forEach(function(item){++cov_2r8ff24eb4.f[3];++cov_2r8ff24eb4.s[9];if(!resultItem[item.verb]){++cov_2r8ff24eb4.b[2][0];++cov_2r8ff24eb4.s[10];resultItem[item.verb]=[];}else{++cov_2r8ff24eb4.b[2][1];}++cov_2r8ff24eb4.s[11];resultItem[item.verb].push(item.fromIdentificador);});++cov_2r8ff24eb4.s[12];for(var verbKey in resultItem){var result=(++cov_2r8ff24eb4.s[13],[]);++cov_2r8ff24eb4.s[14];result.push(key);++cov_2r8ff24eb4.s[15];result.push(verbKey);var fromIdentificadors=(++cov_2r8ff24eb4.s[16],'\"'+resultItem[verbKey].join(',')+'\"');++cov_2r8ff24eb4.s[17];result.push(fromIdentificadors);++cov_2r8ff24eb4.s[18];results.push(result);}};++cov_2r8ff24eb4.s[19];for(var key in data.results){++cov_2r8ff24eb4.s[20];_loop(key);}++cov_2r8ff24eb4.s[21];return results.join('\\n');}var generalFunctions=(++cov_2r8ff24eb4.s[22],{id:'sistema',/** For requests with an `id`, you can auto-load the entity.\n   *  Errors terminate the request, success sets `req[id] = data`.\n   */load:function load(req,id,callback){++cov_2r8ff24eb4.f[4];++cov_2r8ff24eb4.s[23];_Sistemas2.default.getSistema(id).then(function(data){++cov_2r8ff24eb4.f[5];++cov_2r8ff24eb4.s[24];return callback(null,data.data[0]);}).catch(function(reason){++cov_2r8ff24eb4.f[6];++cov_2r8ff24eb4.s[25];return callback(reason);});},/** GET / - List all entities */index:function index(_ref,res){++cov_2r8ff24eb4.f[7];var params=(++cov_2r8ff24eb4.s[26],_ref.params);++cov_2r8ff24eb4.s[27];_Sistemas2.default.getAll().then(function(data){++cov_2r8ff24eb4.f[8];++cov_2r8ff24eb4.s[28];return res.json(data.data);}).catch(function(reason){++cov_2r8ff24eb4.f[9];++cov_2r8ff24eb4.s[29];return res.status(400).send(reason);});},/** GET /:id - Return a given entity */read:function read(_ref2,res){++cov_2r8ff24eb4.f[10];var sistema=(++cov_2r8ff24eb4.s[30],_ref2.sistema);++cov_2r8ff24eb4.s[31];res.json(sistema);}});var extraFunctions=(++cov_2r8ff24eb4.s[32],{users:{verb:'get',action:function action(_ref3,res){++cov_2r8ff24eb4.f[11];var params=(++cov_2r8ff24eb4.s[33],_ref3.params);var sistema=(++cov_2r8ff24eb4.s[34],params.sistema);++cov_2r8ff24eb4.s[35];if((++cov_2r8ff24eb4.b[4][0],sistema)&&(++cov_2r8ff24eb4.b[4][1],sistema.length>0)){++cov_2r8ff24eb4.b[3][0];++cov_2r8ff24eb4.s[36];_Sistemas2.default.getAllSistemaDbUsers(sistema).then(function(data){++cov_2r8ff24eb4.f[12];++cov_2r8ff24eb4.s[37];return res.json(data.data);}).catch(function(reason){++cov_2r8ff24eb4.f[13];++cov_2r8ff24eb4.s[38];return res.status(400).send(reason);});}else{++cov_2r8ff24eb4.b[3][1];++cov_2r8ff24eb4.s[39];res.status(400).send({status:'Failure',data:{message:'Invalid sistema param'}});}}},tables:{verb:'get',action:function action(_ref4,res){++cov_2r8ff24eb4.f[14];var params=(++cov_2r8ff24eb4.s[40],_ref4.params),query=(++cov_2r8ff24eb4.s[41],_ref4.query);var format=(++cov_2r8ff24eb4.s[42],query.format);var sistema=(++cov_2r8ff24eb4.s[43],params.sistema);++cov_2r8ff24eb4.s[44];if((++cov_2r8ff24eb4.b[6][0],sistema)&&(++cov_2r8ff24eb4.b[6][1],sistema.length>0)){++cov_2r8ff24eb4.b[5][0];++cov_2r8ff24eb4.s[45];_Sistemas2.default.getTablesReadBySistema(sistema).then(function(data){++cov_2r8ff24eb4.f[15];var result=(++cov_2r8ff24eb4.s[46],data.data);++cov_2r8ff24eb4.s[47];if((++cov_2r8ff24eb4.b[8][0],format)&&(++cov_2r8ff24eb4.b[8][1],'csv'==format.toLowerCase())){++cov_2r8ff24eb4.b[7][0];++cov_2r8ff24eb4.s[48];result=transformTablesJson2CSV(data.data);++cov_2r8ff24eb4.s[49];res.status(200).send(result);}else{++cov_2r8ff24eb4.b[7][1];++cov_2r8ff24eb4.s[50];res.json(result);}}).catch(function(reason){++cov_2r8ff24eb4.f[16];++cov_2r8ff24eb4.s[51];return res.status(400).send(reason);});}else{++cov_2r8ff24eb4.b[5][1];++cov_2r8ff24eb4.s[52];res.status(400).send({status:'Failure',data:{message:'Invalid sistema param'}});}}}});++cov_2r8ff24eb4.s[53];exports.default={generalFunctions:generalFunctions,extraFunctions:extraFunctions,setConfig:function setConfig(config){++cov_2r8ff24eb4.f[17];++cov_2r8ff24eb4.s[54];_Sistemas2.default.setConfig(config);}};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpc3RlbWFzLmpzIl0sIm5hbWVzIjpbInRyYW5zZm9ybVRhYmxlc0pzb24yQ1NWIiwiZGF0YSIsInJlc3VsdHMiLCJwdXNoIiwia2V5IiwicmVzdWx0SXRlbSIsImZvckVhY2giLCJpdGVtIiwidmVyYiIsImZyb21JZGVudGlmaWNhZG9yIiwidmVyYktleSIsInJlc3VsdCIsImZyb21JZGVudGlmaWNhZG9ycyIsImpvaW4iLCJnZW5lcmFsRnVuY3Rpb25zIiwiaWQiLCJsb2FkIiwicmVxIiwiY2FsbGJhY2siLCJnZXRTaXN0ZW1hIiwidGhlbiIsImNhdGNoIiwicmVhc29uIiwiaW5kZXgiLCJyZXMiLCJwYXJhbXMiLCJnZXRBbGwiLCJqc29uIiwic3RhdHVzIiwic2VuZCIsInJlYWQiLCJzaXN0ZW1hIiwiZXh0cmFGdW5jdGlvbnMiLCJ1c2VycyIsImFjdGlvbiIsImxlbmd0aCIsImdldEFsbFNpc3RlbWFEYlVzZXJzIiwibWVzc2FnZSIsInRhYmxlcyIsInF1ZXJ5IiwiZm9ybWF0IiwiZ2V0VGFibGVzUmVhZEJ5U2lzdGVtYSIsInRvTG93ZXJDYXNlIiwic2V0Q29uZmlnIiwiY29uZmlnIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7Ozs7O0FBRUEsU0FBU0EsdUJBQVQsQ0FBaUNDLElBQWpDLEVBQXVDO0FBQ3JDLE1BQUlDLFVBQVUsRUFBZDtBQUNBQSxVQUFRQyxJQUFSLENBQWEsQ0FBQyxTQUFELEVBQVksT0FBWixFQUFxQixTQUFyQixDQUFiOztBQUZxQyw2QkFHNUJDLEdBSDRCO0FBSW5DLFFBQUlDLGFBQWEsRUFBakI7QUFDQUosU0FBS0MsT0FBTCxDQUFhRSxHQUFiLEVBQWtCSCxJQUFsQixDQUF1QkssT0FBdkIsQ0FBZ0MsVUFBQ0MsSUFBRCxFQUFVO0FBQ3hDLFVBQUksQ0FBQ0YsV0FBV0UsS0FBS0MsSUFBaEIsQ0FBTCxFQUE0QkgsV0FBV0UsS0FBS0MsSUFBaEIsSUFBd0IsRUFBeEI7QUFDNUJILGlCQUFXRSxLQUFLQyxJQUFoQixFQUFz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QVNELE1BQU1DLE1BQW5CO0FBQ0EsVUFBSVQsVUFBVU4sT0FBT00sT0FBckI7QUFDQSxVQUFJQSxXQUFXQSxRQUFRSSxNQUFSLEdBQWlCLENBQWhDLEVBQW1DO0FBQ2pDLDJCQUFTTSxzQkFBVCxDQUFnQ1YsT0FBaEMsRUFDR1gsSUFESCxDQUNTLFVBQUNuQixJQUFELEVBQVU7QUFDZixjQUFJVSxTQUFTVixLQUFLQSxJQUFsQjtBQUNBLGNBQUl1QyxVQUFVLFNBQVNBLE9BQU9FLFdBQVAsRUFBdkIsRUFBNkM7QUFDM0MvQixxQkFBU1gsd0JBQXdCQyxLQUFLQSxJQUE3QixDQUFUO0FBQ0F1QixnQkFBSUksTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCbEIsTUFBckI7QUFDRCxXQUhELE1BSUthLElBQUlHLElBQUosQ0FBU2hCLE1BQVQ7QUFDTixTQVJILEVBU0dVLEtBVEgsQ0FTVSxVQUFDQyxNQUFEO0FBQUEsaUJBQVlFLElBQUlJLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQlAsTUFBckIsQ0FBWjtBQUFBLFNBVFY7QUFVRCxPQVhELE1BWUs7QUFDSEUsWUFBSUksTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLEVBQUNELFFBQU8sU0FBUixFQUFrQjNCLE1BQUssRUFBQ29DLFNBQVEsdUJBQVQsRUFBdkIsRUFBckI7QUFDRDtBQUNGO0FBcEJJO0FBZlksQ0FBckI7O2tCQXVDZTtBQUNidkIsb0JBQWlCQSxnQkFESjtBQUVia0Isa0JBQWVBLGNBRkY7QUFHYlcsYUFBVSxtQkFBQ0MsTUFBRCxFQUFZO0FBQUUsdUJBQVNELFNBQVQsQ0FBbUJDLE1BQW5CO0FBQTZCO0FBSHhDLEMiLCJmaWxlIjoic2lzdGVtYXMuanMiLCJzb3VyY2VSb290IjoiL1VzZXJzL2NvaWNoZWRpZC9Qcm9qZXRvcy9CYXNlQXV0b3JpdGF0aXZhQVBJL2Jhc2UtYXV0b3JpdGF0aXZhLWFwaS9zcmMvYXBpIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNpc3RlbWFzIGZyb20gJy4uL21vZGVscy9TaXN0ZW1hcyc7XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybVRhYmxlc0pzb24yQ1NWKGRhdGEpIHtcbiAgbGV0IHJlc3VsdHMgPSBbXTtcbiAgcmVzdWx0cy5wdXNoKFsnVXN1w6FyaW8nLCAnVmVyYm8nLCAnVGFiZWxhcyddKTtcbiAgZm9yIChsZXQga2V5IGluIGRhdGEucmVzdWx0cykge1xuICAgIGxldCByZXN1bHRJdGVtID0ge307XG4gICAgZGF0YS5yZXN1bHRzW2tleV0uZGF0YS5mb3JFYWNoKCAoaXRlbSkgPT4ge1xuICAgICAgaWYgKCFyZXN1bHRJdGVtW2l0ZW0udmVyYl0pIHJlc3VsdEl0ZW1baXRlbS52ZXJiXSA9IFtdO1xuICAgICAgcmVzdWx0SXRlbVtpdGVtLnZlcmJdLnB1c2goaXRlbS5mcm9tSWRlbnRpZmljYWRvcik7XG4gICAgfSApO1xuICAgIGZvciAobGV0IHZlcmJLZXkgaW4gcmVzdWx0SXRlbSkge1xuICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICAgIHJlc3VsdC5wdXNoKHZlcmJLZXkpO1xuICAgICAgbGV0IGZyb21JZGVudGlmaWNhZG9ycyA9ICdcIicgKyByZXN1bHRJdGVtW3ZlcmJLZXldLmpvaW4oJywnKSArICdcIic7XG4gICAgICByZXN1bHQucHVzaChmcm9tSWRlbnRpZmljYWRvcnMpO1xuICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHRzLmpvaW4oJ1xcbicpO1xufVxubGV0IGdlbmVyYWxGdW5jdGlvbnMgPSB7XG4gIGlkOidzaXN0ZW1hJyxcblxuICAvKiogRm9yIHJlcXVlc3RzIHdpdGggYW4gYGlkYCwgeW91IGNhbiBhdXRvLWxvYWQgdGhlIGVudGl0eS5cbiAgICogIEVycm9ycyB0ZXJtaW5hdGUgdGhlIHJlcXVlc3QsIHN1Y2Nlc3Mgc2V0cyBgcmVxW2lkXSA9IGRhdGFgLlxuICAgKi9cbiAgbG9hZChyZXEsIGlkLCBjYWxsYmFjaykge1xuICAgIFNpc3RlbWFzLmdldFNpc3RlbWEoaWQpXG4gICAgICAudGhlbiggKGRhdGEpID0+IGNhbGxiYWNrKG51bGwsIGRhdGEuZGF0YVswXSkgKVxuICAgICAgLmNhdGNoKCAocmVhc29uKSA9PiBjYWxsYmFjayhyZWFzb24pICk7XG4gIH0sXG5cbiAgLyoqIEdFVCAvIC0gTGlzdCBhbGwgZW50aXRpZXMgKi9cbiAgaW5kZXgoeyBwYXJhbXMgfSwgcmVzKSB7XG4gICAgU2lzdGVtYXMuZ2V0QWxsKClcbiAgICAgIC50aGVuKCAoZGF0YSkgPT4gcmVzLmpzb24oZGF0YS5kYXRhKSApXG4gICAgICAuY2F0Y2goIChyZWFzb24pID0+IHJlcy5zdGF0dXMoNDAwKS5zZW5kKHJlYXNvbikgKTtcbiAgfSxcblxuICAvKiogR0VUIC86aWQgLSBSZXR1cm4gYSBnaXZlbiBlbnRpdHkgKi9cbiAgcmVhZCh7IHNpc3RlbWEgfSwgcmVzKSB7XG4gICAgcmVzLmpzb24oc2lzdGVtYSk7XG4gIH1cbn07XG5sZXQgZXh0cmFGdW5jdGlvbnMgPSB7XG4gIHVzZXJzOntcbiAgICB2ZXJiOidnZXQnLFxuICAgIGFjdGlvbjooe3BhcmFtc30scmVzKSA9PiB7XG4gICAgICBsZXQgc2lzdGVtYSA9IHBhcmFtcy5zaXN0ZW1hO1xuICAgICAgaWYgKHNpc3RlbWEgJiYgc2lzdGVtYS5sZW5ndGggPiAwKSB7XG4gICAgICAgIFNpc3RlbWFzLmdldEFsbFNpc3RlbWFEYlVzZXJzKHNpc3RlbWEpXG4gICAgICAgICAgLnRoZW4oIChkYXRhKSA9PiByZXMuanNvbihkYXRhLmRhdGEpIClcbiAgICAgICAgICAuY2F0Y2goIChyZWFzb24pID0+IHJlcy5zdGF0dXMoNDAwKS5zZW5kKHJlYXNvbikgKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuc2VuZCh7c3RhdHVzOidGYWlsdXJlJyxkYXRhOnttZXNzYWdlOidJbnZhbGlkIHNpc3RlbWEgcGFyYW0nfX0pO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgdGFibGVzOntcbiAgICB2ZXJiOidnZXQnLFxuICAgIGFjdGlvbjooe3BhcmFtcywgcXVlcnl9LHJlcykgPT4ge1xuICAgICAgbGV0IGZvcm1hdCA9IHF1ZXJ5LmZvcm1hdDtcbiAgICAgIGxldCBzaXN0ZW1hID0gcGFyYW1zLnNpc3RlbWE7XG4gICAgICBpZiAoc2lzdGVtYSAmJiBzaXN0ZW1hLmxlbmd0aCA+IDApIHtcbiAgICAgICAgU2lzdGVtYXMuZ2V0VGFibGVzUmVhZEJ5U2lzdGVtYShzaXN0ZW1hKVxuICAgICAgICAgIC50aGVuKCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGRhdGEuZGF0YTtcbiAgICAgICAgICAgIGlmIChmb3JtYXQgJiYgJ2NzdicgPT0gZm9ybWF0LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgcmVzdWx0ID0gdHJhbnNmb3JtVGFibGVzSnNvbjJDU1YoZGF0YS5kYXRhKTtcbiAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQocmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgcmVzLmpzb24ocmVzdWx0KTtcbiAgICAgICAgICB9IClcbiAgICAgICAgICAuY2F0Y2goIChyZWFzb24pID0+IHJlcy5zdGF0dXMoNDAwKS5zZW5kKHJlYXNvbikgKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuc2VuZCh7c3RhdHVzOidGYWlsdXJlJyxkYXRhOnttZXNzYWdlOidJbnZhbGlkIHNpc3RlbWEgcGFyYW0nfX0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGdlbmVyYWxGdW5jdGlvbnM6Z2VuZXJhbEZ1bmN0aW9ucyxcbiAgZXh0cmFGdW5jdGlvbnM6ZXh0cmFGdW5jdGlvbnMsXG4gIHNldENvbmZpZzooY29uZmlnKSA9PiB7IFNpc3RlbWFzLnNldENvbmZpZyhjb25maWcpOyB9XG59O1xuIl19",
  "hash": "b3103e25d30999aa46f5d82e7b6d783a"
}
